{"version":3,"file":"fetch-inject.js","sources":["../src/injectors.js","../src/fetch-inject.js"],"sourcesContent":["export const script = (function(i,s,o,g,r,a,m){a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.appendChild(s.createTextNode(g));a.onload=r;m?m.parentNode.insertBefore(a,m):s.head.appendChild(a)}) // eslint-disable-line\nexport const style = (function(i,s,o,g,r,a,m){a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.type='text/css';a.appendChild(s.createTextNode(g));m?m.parentNode.insertBefore(a,m):s.head.appendChild(a)}) // eslint-disable-line\n","import {\n  script as injectScript,\n  style as injectStyle\n} from './injectors'\n\nexport default function (urls) {\n  const resources = []\n  const deferreds = []\n  const thenables = []\n\n  urls.forEach((url) => deferreds.push(\n    window.fetch(url).then(res => {\n      return [res.clone().text(), res.blob()]\n    }).then(kvArrays => {\n      return Promise.all(kvArrays).then((kvArray) => {\n        resources.push({ text: kvArray[0], type: kvArray[1].type })\n      })\n    })\n  ))\n\n  return Promise.all(deferreds).then(() => {\n    resources.forEach((resource) => {\n      thenables.push({ then: (resolve) => {\n        if (resource.type === 'application/javascript') {\n          injectScript(window, document, 'script', resource.text, resolve())\n        } else if (resource.type === 'text/css') {\n          injectStyle(window, document, 'style', resource.text)\n          resolve()\n        }\n      }})\n    })\n    return Promise.all(thenables)\n  })\n}\n"],"names":["injectScript","injectStyle"],"mappings":";;;;;;;;;AAAO,MAAM,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAA,CAAC,CAAC,CAAA;AACzM,MAAa,KAAK,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAA,CAAC,CAAC,CAAA,uBAAuB;;ACItO,kBAAe,UAAU,IAAI,EAAE;EAC7B,MAAM,SAAS,GAAG,EAAE,CAAA;EACpB,MAAM,SAAS,GAAG,EAAE,CAAA;EACpB,MAAM,SAAS,GAAG,EAAE,CAAA;;EAEpB,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,KAAK,SAAS,CAAC,IAAI;IAClC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI;MAC5B,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,IAAI,EAAE,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC;KACxC,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI;MAClB,OAAO,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,KAAK;QAC7C,SAAS,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAA;OAC5D,CAAC;KACH,CAAC;GACH,CAAC,CAAA;;EAEF,OAAO,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,MAAM;IACvC,SAAS,CAAC,OAAO,CAAC,CAAC,QAAQ,KAAK;MAC9B,SAAS,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,OAAO,KAAK;QAClC,IAAI,QAAQ,CAAC,IAAI,KAAK,wBAAwB,EAAE;UAC9CA,MAAY,CAAC,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC,CAAA;SACnE,MAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,UAAU,EAAE;UACvCC,KAAW,CAAC,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAA;UACrD,OAAO,EAAE,CAAA;SACV;OACF,CAAC,CAAC,CAAA;KACJ,CAAC,CAAA;IACF,OAAO,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC;GAC9B,CAAC;CACH,CAAA;;;;"}